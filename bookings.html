<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="/favicon.ico" rel="icon" type="image/x-icon"/>
    <title>Rajdhani Guest House - View Bookings</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="View and confirm your bookings at Rajdhani Guest House in Kalanki, Kathmandu. Manage your stay at one of the best hotels in Kalanki with affordable pricing.">
    <meta name="keywords" content="hotels in Kalanki, guest house in Kalanki, affordable hotels Kathmandu, Rajdhani Guest House pricing, book hotels Kathmandu, Kalanki accommodation">
    <meta name="author" content="Rajdhani Guest House">
    <meta name="robots" content="index, follow">
    <meta name="geo.region" content="NP">
    <meta name="geo.placename" content="Kalanki, Kathmandu, Nepal">
    <meta name="geo.position" content="27.693802;85.280837">
    <meta name="og:title" content="Rajdhani Guest House - View Bookings">
    <meta name="og:description" content="Check and confirm your bookings at Rajdhani Guest House, a top guest house in Kalanki, with affordable pricing and luxury amenities.">
    <meta name="og:type" content="website">
    <meta name="og:url" content="https://www.rajdhani-hotel.com/bookings.html">
    <meta name="og:image" content="/swoyambhu.jpg">
    <meta name="og:image:alt" content="Swoyambhu Stupa near Rajdhani Guest House in Kalanki">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Rajdhani Guest House - View Bookings">
    <meta name="twitter:description" content="View and confirm your bookings at Rajdhani Guest House in Kalanki, one of the best hotels in Kalanki with budget-friendly pricing.">
    <meta name="twitter:image" content="/swoyambhu.jpg">
    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LodgingBusiness",
      "name": "Rajdhani Guest House",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Kalanki-14",
        "addressLocality": "Kathmandu",
        "addressCountry": "NP"
      },
      "makesOffer": {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Service",
          "name": "Hotel Booking"
        }
      }
    }
    </script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400&display=swap" rel="stylesheet">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
    <!-- Custom CSS -->
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }
        .navbar {
            background-color: #1a3c5e;
            padding: 15px 0;
        }
        .navbar-brand {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: #d4af37 !important;
            font-weight: 700;
        }
        .nav-link {
            color: #fff !important;
            font-weight: 400;
            transition: color 0.3s;
        }
        .nav-link:hover {
            color: #d4af37 !important;
        }
        .booking-section {
            background: #fff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            background: linear-gradient(145deg, #ffffff, #e6e6e6);
            margin-bottom: 20px;
        }
        .booking-section h2 {
            font-family: 'Playfair Display', serif;
            color: #1a3c5e;
            font-size: 2.5rem;
            margin-bottom: 20px;
        }
        .booking-section p {
            font-size: 1rem;
            color: #333;
            margin-bottom: 20px;
        }
        .booking-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        .booking-table th, .booking-table td {
            padding: 12px;
            border: 1px solid #d4af37;
            text-align: center;
        }
        .booking-table th {
            background-color: #1a3c5e;
            color: #fff;
            font-family: 'Playfair Display', serif;
        }
        .booking-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .booking-table tr:hover {
            background-color: #f0f0f0;
        }
        .btn-primary {
            background-color: #d4af37;
            border-color: #d4af37;
            color: #ffffff !important;
            font-weight: 600;
            padding: 10px 20px;
            transition: background-color 0.3s;
        }
        .btn-primary:hover, .btn-primary:active {
            background-color: #b8972e;
            border-color: #b8972e;
            color: #ffffff !important;
        }
        .btn-confirm {
            background-color: transparent;
            border: none;
            color: #28a745;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px;
        }
        .btn-confirm.confirmed {
            color: #28a745;
            font-weight: bold;
        }
        .btn-confirm:not(.confirmed) {
            color: #6c757d;
        }
        .btn-confirm:hover {
            color: #218838;
        }
        .loading, .error {
            text-align: center;
            font-size: 1rem;
            margin: 20px 0;
        }
        .footer {
            background-color: #1a3c5e;
            color: #fff;
            padding: 20px;
            text-align: center;
            font-size: 0.9rem;
        }
        .footer a {
            color: #d4af37;
            text-decoration: none;
        }
        .footer a:hover {
            color: #b8972e;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="/">Rajdhani Guest House</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                
                </ul>
            </div>
        </div>
    </nav>

    <!-- Bookings Section -->
    <section class="py-5">
        <div class="container">
            <div class="booking-section">
                <h2>Your Bookings</h2>
                <div id="loading" class="loading">Loading bookings...</div>
                <div id="error" class="error" style="display: none;"></div>
                <table class="booking-table" id="bookingTable">
                    <thead>
                        <tr>
                            <th>Guest Name</th>
                            <th>Phone Number</th>
                            <th>Check-In Date</th>
                            <th>Check-Out Date</th>
                            <th>Room Type</th>
                            <th>Booking Date</th>
                            <th>Confirm</th>
                        </tr>
                    </thead>
                    <tbody id="bookingsTableBody"></tbody>
                </table>
                <a href="/" class="btn btn-primary">Back to Homepage</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>Â© 2025 Rajdhani Guest House. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- BEGIN: Powered by Supercounters.com -->
    <div style="position: fixed; top: 0; left: 0; width: 100%; height: 1px; overflow: hidden; visibility: hidden; z-index: 9999;">
        <script type="text/javascript" src="//widget.supercounters.com/ssl/online_i.js"></script>
        <script type="text/javascript">sc_online_i(1714446,"ffffff","ffffff");</script>
        <noscript><a href="https://www.supercounters.com/" style="visibility: hidden;">Free Online Counter</a></noscript>
    </div>
    <!-- END: Powered by Supercounters.com -->

    <!-- Bootstrap JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Firebase Initialization and Bookings Display -->
    <script>
        // Initialize Firebase
        const firebaseConfig = {
 apiKey: "AIzaSyAsn9NIdHRbIF7JZ8GPohWM7ar2LZTLCE4",
    authDomain: "rajdhani77-33a2e.firebaseapp.com",
    projectId: "rajdhani77-33a2e",
    storageBucket: "rajdhani77-33a2e.firebasestorage.app",
    messagingSenderId: "601317784966",
    appId: "1:601317784966:web:17c8e0470fdd2332eb4007",
    measurementId: "G-4YPZPB7BS0"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Toggle confirmation status
        async function toggleConfirm(bookingId, currentStatus) {
            try {
                await db.collection('bookings').doc(bookingId).update({
                    confirmed: !currentStatus
                });
            } catch (error) {
                console.error('Error updating confirmation:', error);
                alert('Error updating confirmation: ' + error.message);
            }
        }

        // Real-time bookings display
        function displayBookings() {
            const tableBody = document.getElementById('bookingsTableBody');
            const loadingDiv = document.getElementById('loading');
            const errorDiv = document.getElementById('error');

            // Show loading state
            loadingDiv.style.display = 'block';
            errorDiv.style.display = 'none';
            tableBody.innerHTML = '';

            // Listen for real-time updates
            db.collection('bookings').orderBy('timestamp', 'desc').onSnapshot(snapshot => {
                tableBody.innerHTML = '';
                if (snapshot.empty) {
                    tableBody.innerHTML = '<tr><td colspan="7" class="text-center">No bookings found.</td></tr>';
                    loadingDiv.style.display = 'none';
                    return;
                }
                snapshot.forEach(doc => {
                    const booking = doc.data();
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${booking.guestName || 'N/A'}</td>
                        <td>${booking.phoneNumber || booking.email || 'N/A'}</td>
                        <td>${booking.checkInDate || 'N/A'}</td>
                        <td>${booking.checkOutDate || 'N/A'}</td>
                        <td>${booking.roomType || 'N/A'}</td>
                        <td>${booking.timestamp ? new Date(booking.timestamp.toDate()).toLocaleString() : 'N/A'}</td>
                        <td>
                            <button class="btn-confirm ${booking.confirmed ? 'confirmed' : ''}" 
                                    onclick="toggleConfirm('${doc.id}', ${booking.confirmed || false})">
                                ${booking.confirmed ? 'â' : 'â¡'}
                            </button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
                loadingDiv.style.display = 'none';
            }, error => {
                console.error('Error fetching bookings:', error);
                loadingDiv.style.display = 'none';
                errorDiv.style.display = 'block';
                errorDiv.textContent = 'Error loading bookings: ' + error.message;
            });
        }

        // Load bookings on page load
        window.onload = displayBookings;
    </script>
</body>
</html>
